{"version":3,"sources":["contexts/index.js","components/Quiz/QuizGraphQL.js","components/Consent/ConsentGraphQL.js","misc/tracker.js","components/Consent/Consent.jsx","components/Media/components/Image.jsx","components/VideoPlayer/VideoPlayer.jsx","components/Media/components/Video.jsx","components/Media/components/widen/WidenMediaGraphQL.js","components/Media/components/widen/WidenMediaModel.js","components/Media/components/widen/WidenImage.jsx","components/Media/components/widen/WidenVideo.jsx","components/Media/Media.jsx","components/cssSharedClasses.jsx","components/Quiz/Quiz.jsx","components/Quiz/Indicator/Indicator.jsx","components/Qna/QnaGraphQL.js","components/Qna/Answer/Answer.jsx","misc/utils.js","components/Qna/QnaModel.js","components/Qna/Qna.jsx","components/Warmup/WarmupGraphQL.js","components/Warmup/Warmup.jsx","components/Warmup/WarmupModel.js","components/Score/personalized/PersonalizedGraphQL.js","components/Score/personalized/Personalized.jsx","components/Score/percentage/Percentage.jsx","components/Score/Score.jsx","components/App.jsx","components/Error/Ajv.jsx","misc/serviceWorker.js","douane/lib/config.js","douane/lib/schema/index.js","douane/index.js","components/Store/Store.jsx","components/Quiz/QuizModel.js","components/theme.js","index.js"],"names":["StoreContext","React","createContext","GET_QUIZ","gql","GET_CONSENT","syncConsentStatus","typeIdentifier","scope","status","statusDate","Date","revokeDate","setFullYear","getFullYear","console","debug","uTracker","track","consent","toISOString","useStyles","makeStyles","theme","granted","display","flexWrap","alignItems","margin","marginRight","flexBasis","fontSize","denied","cursor","color","palette","error","main","width","marginLeft","Consent","props","classes","id","quizState","quizDispatch","consents","filter","state","useContext","jContent","cxs","gql_variables","consent_status","variables","Object","assign","useQuery","loading","data","useEffect","consentData","get","case","payload","FormGroup","aria-label","row","FormControlLabel","value","checked","control","Checkbox","label","title","labelPlacement","onChange","e","target","Typography","className","style","component","description","onClick","identifier","DENIED","handleDenied","Image","path","alt","files_endpoint","src","encodeURI","playerWrapper","VideoPlayer","ownerID","videoURL","quiz","player","useRef","handleVideoStatus","content","parent","type","game4Quiz","game4Warmup","game4Video","duration","current","getDuration","currentTime","getCurrentTime","syncVideoStatus","ref","url","controls","height","onStart","onPlay","onPause","onEnded","Video","GET_WIDEN_MEDIA","mediaData","imageURL","WidenImage","uuid","useState","media","setMedia","MediaMapper","replace","WidenVideo","Media","mixins","sourceID","cnd_type","WIDEN_IMAGE","WIDEN_VIDEO","EXT_VIDEO","JNT_FILE","includes","IMAGE","textUppercase","textTransform","subtitle","backgroundColor","primary","spacing","marginTop","item","position","float","backfaceVisibility","transition","transitions","create","long","easing","easeInOut","minHeight","geometry","objectFit","showOverlay","top","right","bottom","left","background","overlay","boxShadow","shadows","caption","zIndex","textAlign","standard","header","justifyContent","maxWidth","listStyle","padding","marginBottom","consentTitle","textDecoration","init","computeEnableStartBtn","showNext","workspace","length","reducer","action","consentPath","cxsConsentStatus","cxsConsentRevokeDate","GRANTED","now","parse","actived","JSON","enableStartBtn","map","Error","Quiz","sharedClasses","cssSharedClasses","dispatch","currentSlide","language_bundle","useReducer","show","classnames","mixin","variant","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","ADD_ATTR","Button","forEach","disabled","btnStart","indicator","boxSizing","flex","spacer","textIndent","common","white","backgroundClip","borderTop","hitAreaHeight","borderBottom","opacity","ease","grey","Indicator","enabled","active","slide","GET_QNA","answerGroup","checkedAnswer","borderRadius","checkGroup","easeOut","borderStyle","borderWidth","borderColor","labelGroup","Answer","qna","qnaDispatch","answers","answer","isValid","isAnswer","notUsedForScore","inputType","Radio","getRandomString","format","mask","indexOf","result","i","Math","floor","random","qnaData","randomSelection","controlledAnswer","sort","a","b","question","help","jExpField2Map","questionGroup","formGroup","initialQNA","enableSubmit","QnaMapper","_answer","Qna","reset","getAnswers","reduce","test","values","index","cdpValue","propertyName","propertyValue","update","syncVisitorData","btnSubmit","GET_WARMUP","contentGroup","Warmup","childNodes","warmup","setWarmup","warmupData","video","videoLink","videoIntPath","node","WarmupMapper","slides","parentSlide","btnQuestion","GET_PERSONALIZED_RESULT","Personalized","setResult","profileId","sessionId","fetchPolicy","persoData","text","fill","stroke","Percentage","score","Score","scoreIndex","log","personalizedResult","btnReset","headerIndicators","headerResult","overflow","headerText","fontWeight","typography","fontWeightBold","inner","clear","App","slideSet","currentResult","showResult","showScore","quizData","quizKey","bundle","key","initLanguageBundle","initialize","ready","window","syncTracker","cdp_endpoint","handleNextSlide","handleShowScore","Grid","container","xs","itemId","allow_indicator_browsing","correctAnswer","wrongAnswer","btnShowResults","btnNextQuestion","QNA","WARMUP","displayScore","Ajv","errors","dataPath","message","Boolean","location","hostname","match","REVOKED","context","properties","host","default","process","enum","pattern","gql_endpoint","gql_authorization","language","required","additionalProperties","ajv","useDefaults","resultSet","max","QuizMapper","push","splice","currentIndex","nextIndex","nextSlide","slice","goodAnswers","split","quizScore","syncQuizScore","score_splitPattern","Store","Provider","children","createMuiTheme","light","dark","secondary","allVariants","fontFamily","join","h3","h4","overrides","MuiCheckbox","root","MuiRadio","MuiButton","contained","disableRipple","quizUIApp","validate","schema","toUpperCase","getGQLWorkspace","quiz_validMark","contextValidator","headers","Authorization","client","ApolloClient","uri","ReactDOM","render","ThemeProvider","document","getElementById","navigator","serviceWorker","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.56779b40.chunk.js","sourcesContent":["import React from 'react';\n\nexport const StoreContext = React.createContext(null);\n","import {gql} from 'apollo-boost';\n\n// cover: property(name:\"game4:cover\"){\n//     node: refNode {\n//         path\n//     }\n// }\n\nexport const GET_QUIZ = gql`\n    query getQuiz($workspace: Workspace!, $id: String!, $language: String!) {\n        response: jcr(workspace: $workspace) {\n            quiz: nodeById(uuid: $id) {\n                id: uuid\n                type: primaryNodeType{\n                    value:name\n                }\n                key: property(name:\"game4:quizKey\"){\n                    value\n                }\n                title: displayName(language:$language)\n                subtitle: property(language:$language, name:\"game4:subtitle\"){\n                    value\n                }\n                description: property(language:$language,name:\"game4:description\"){\n                    value\n                }\n                duration: property(name:\"game4:duration\"){\n                    value\n                }\n                media: property(language:$language,name:\"wden:mediaNode\",){\n                    node: refNode {\n                        id: uuid\n                        type: primaryNodeType{\n                            value:name\n                        }\n                        mixins: mixinTypes{\n                            value:name\n                        }\n                        path\n                    }\n                }\n                consents: property(name:\"game4:consentType\"){\n                    nodes: refNodes {\n                        id: uuid\n                        actived: property(language:$language,name:\"wem:activated\"){\n                            value\n                        }\n                    }\n                }\n                personalizedResult: property(name:\"game4:personalizedResultContent\"){\n                    node: refNode {\n                        id: uuid\n                        type: primaryNodeType{\n                            value:name\n                        }\n                    }\n                }\n                children{\n                    nodes {\n                        id: uuid\n                        type: primaryNodeType{\n                            value:name\n                        }\n                    }\n                },\n                btnStart: property(language:$language, name:\"game4:btnStart\"){\n                    value\n                },\n                btnSubmit: property(language:$language, name:\"game4:btnSubmit\"){\n                    value\n                },\n                btnQuestion: property(language:$language, name:\"game4:btnQuestion\"){\n                    value\n                },\n                btnNextQuestion: property(language:$language, name:\"game4:btnNextQuestion\"){\n                    value\n                },\n                btnShowResults: property(language:$language, name:\"game4:btnShowResults\"){\n                    value\n                },\n                btnReset: property(language:$language, name:\"game4:btnReset\"){\n                    value\n                },\n                consentTitle: property(language:$language, name:\"game4:consentTitle\"){\n                    value\n                },\n                correctAnswer: property(language:$language, name:\"game4:correctAnswer\"){\n                    value\n                },\n                wrongAnswer: property(language:$language, name:\"game4:wrongAnswer\"){\n                    value\n                }\n            }\n        }\n    }\n`\n\n\n","import {gql} from 'apollo-boost';\n\nexport const GET_CONSENT = gql`\n    query getConsent($workspace: Workspace!, $id: String!, $language: String!) {\n        response: jcr(workspace: $workspace) {\n            consent: nodeById(uuid: $id) {\n                id: uuid\n                identifier:name\n                title:displayName(language:$language)\n                description: property(language:$language, name:\"jcr:description\"){\n                    value\n                }\n                actived: property(language:$language,name:\"wem:activated\"){\n                    value\n                }\n            }\n        }\n    }\n`\n\n\n","import uTracker from \"unomi-analytics\";\n\nconst syncTracker = ({scope,url,sessionId,dispatch}) => {\n    uTracker.initialize({\n        \"Apache Unomi\": {\n            scope,\n            url,\n            sessionId\n        }\n    });\n    uTracker.ready( () =>\n        dispatch({\n            case:\"ADD_CXS\",\n            payload:{\n                cxs:window.cxs\n            }\n        })\n    );\n};\n\nconst syncConsentStatus= ({typeIdentifier,scope,status}) => {\n    const statusDate = new Date();\n    const revokeDate = new Date(statusDate);\n    revokeDate.setFullYear(revokeDate.getFullYear() + 2);\n    console.debug(\"syncConsentStatus status :\", status);\n\n    uTracker.track(\"modifyConsent\", {\n        consent: {\n            typeIdentifier,\n            scope,\n            status,\n            statusDate: statusDate.toISOString(),//\"2018-05-22T09:27:09.473Z\",\n            revokeDate: revokeDate.toISOString()//\"2020-05-21T09:27:09.473Z\"\n        }\n    });\n};\n\nconst syncQuizScore = ({quizKey,split,quizScore}) =>\n    uTracker.track(\"setQuizScore\",{\n        score:`${quizKey}${split}${quizScore}`\n    });\n\nconst syncVideoStatus = ({content,parent,status,player}) =>\n    uTracker.track(\"video\",{\n        id:content.id,\n        type:content.type,\n        game4Quiz:{\n            id:content.id,\n            type:content.type\n        },\n        game4Warmup:{\n            id:parent\n        },\n        game4Video:{\n            duration: player.current.getDuration(),\n            currentTime: player.current.getCurrentTime(),\n            status: status\n        }\n    });\n\nconst syncVisitorData = ({propertyName,propertyValue}) =>\n    uTracker.track(\"updateVisitorData\",{\n        update : {\n            propertyName,\n            propertyValue\n        }\n    });\n\nexport {\n    syncTracker,\n    syncConsentStatus,\n    syncQuizScore,\n    syncVideoStatus,\n    syncVisitorData\n}","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport {useQuery} from \"@apollo/react-hooks\";\nimport {GET_CONSENT} from \"components/Consent/ConsentGraphQL\";\nimport get from \"lodash.get\";\n\nimport {syncConsentStatus} from \"misc/tracker\";\nimport {StoreContext} from \"contexts\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport CheckIcon from '@material-ui/icons/Check';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport {Typography,FormGroup,FormControlLabel,Checkbox} from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n    granted:{\n        display:\"flex\",\n        flexWrap:\"wrap\",\n        alignItems: 'center',\n        margin:0,\n        \"& svg\":{\n            marginRight: '.5rem',\n        },\n        \"& i\":{\n            flexBasis: '100%',\n            fontSize: '.85rem',\n        }\n    },\n    denied:{\n        cursor: 'pointer',\n        color: theme.palette.error.main,\n        width: '1rem',\n        marginLeft:'.5rem',\n    }\n}));\n\nconst Consent = (props)=> {\n    const classes = useStyles(props);\n\n    const {id, quizState, quizDispatch} = props;\n    const [consent={}] = quizState.consents.filter(consent => consent.id === id);\n\n    const { state } = React.useContext(StoreContext);\n\n    const {jContent,cxs} = state;\n    const {gql_variables,scope,consent_status} =  jContent;\n\n    const variables = Object.assign(gql_variables,{id})\n    const {loading, error, data} = useQuery(GET_CONSENT, {\n        variables:variables,\n    });\n\n    React.useEffect(() => {\n\n        if(loading === false && data){\n            const consentData = get(data, \"response.consent\", {});\n            quizDispatch({\n                case:\"DATA_READY_CONSENT\",\n                payload:{\n                    consentData,\n                    scope,\n                    cxs,\n                    consent_status\n                }\n            })\n        }\n\n    }, [loading,data]);\n\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error :(</p>;\n\n    console.debug(\"*** paint consent : \",id);\n\n    const handleDenied = (consent) => {\n        syncConsentStatus({\n            scope,\n            typeIdentifier:consent.identifier,\n            status:consent_status.DENIED\n        });\n\n        quizDispatch({\n            case:\"DENIED_CONSENT\",\n            payload:{\n                id:consent.id\n            }\n        });\n    }\n\n    const handleChange= (e) => {\n        quizDispatch({\n            case:\"TOGGLE_CONSENT\",\n            payload:{\n                id:e.target.id\n            }\n        });\n    }\n    return(\n        <li>\n            {!consent.granted &&\n            <div>\n                <FormGroup aria-label=\"position\" row>\n                    <FormControlLabel\n                        value={consent.checked}\n                        control={<Checkbox id={consent.id} />}\n                        label={consent.title}\n                        labelPlacement=\"end\"\n                        onChange={handleChange}\n                    />\n                </FormGroup>\n                <Typography className={classes.granted}\n                            style={{fontSize: '.85rem'}}\n                            component=\"i\">\n                    {consent.description}\n                </Typography>\n            </div>\n            }\n            {consent.granted &&\n                <Typography className={classes.granted}\n                            component=\"p\">\n                    <CheckIcon />\n                    {consent.title}\n                    <BackspaceIcon className={classes.denied}\n                                   onClick={()=> handleDenied(consent)} />\n                    <i>{consent.description}</i>\n                </Typography>\n            }\n        </li>\n    )\n\n    // return(\n    //     <li>\n    //         {!consent.granted &&\n    //             <div className=\"consent-to-grant\">\n    //                 <Form.Check\n    //                     custom\n    //                     type=\"checkbox\"\n    //                     name={consent.identifier}\n    //                     id={consent.id}\n    //                     label={consent.title}\n    //                     onChange={handleChange}\n    //                     checked={consent.checked}\n    //                 />\n    //                 <i>{consent.description}</i>\n    //             </div>\n    //         }\n    //         {consent.granted &&\n    //             <p className=\"consent-granted\">\n    //\n    //                 <FontAwesomeIcon icon={['fas','check']}/>\n    //                 {consent.title}\n    //                 <FontAwesomeIcon className=\"consent-denied\" icon={['fas','ban']} onClick={()=> handleDenied(consent)}/>\n    //                 <i>{consent.description}</i>\n    //             </p>\n    //         }\n    //     </li>\n    // )\n}\n\nConsent.propTypes={\n    id:PropTypes.string.isRequired,\n    quizState:PropTypes.object.isRequired,\n    quizDispatch:PropTypes.func.isRequired\n};\n\nexport default Consent;","import React from \"react\";\nimport {StoreContext} from \"contexts\";\n\nconst Image = ({path,alt}) =>{\n    const { state} = React.useContext(StoreContext);\n    const {files_endpoint} = state.jContent;\n    return(\n        <img className=\"d-block w-100\"\n             src={`${files_endpoint}${encodeURI(path)}`}\n             alt={alt}/>\n    )\n}\nexport default Image;","import React, {useRef} from 'react';\nimport PropTypes from \"prop-types\";\nimport {StoreContext} from \"contexts\";\nimport ReactPlayer from \"react-player\";\nimport {syncVideoStatus} from \"misc/tracker\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n    playerWrapper:{}\n}));\n\nconst VideoPlayer = (props)=>{\n    const classes = useStyles(props);\n    const {ownerID,videoURL} = props;\n    const { state } = React.useContext(StoreContext);\n    const {quiz} = state;\n\n    const player = useRef(null);\n\n    const handleVideoStatus = ({status}) => {\n        syncVideoStatus({\n            content:{\n                id:quiz.id,\n                type:quiz.type\n            },\n            parent:ownerID,\n            player,\n            status\n        })\n    }\n\n    // const onReadyHandler = () => {\n    //     console.log(\"onReady seekTo 4.2s\")\n    //     player.current.seekTo(4.2,\"seconds\");\n    // }\n    const onStartHandler = () => {\n        // player.current.seekTo(4.2,\"seconds\");\n    }\n    const onPlayHandler = () => handleVideoStatus({status:\"started\"});\n    const onEndedHandler = () => handleVideoStatus({status:\"end\"});\n    const onPauseHandler = () => handleVideoStatus({status:\"pause\"});\n\n    return (\n        <div className={classes.playerWrapper}>\n            <ReactPlayer\n                ref={player}\n                className='react-player'\n                url={videoURL}\n                controls\n                width='100%'\n                height='100%'\n                // onReady={onReadyHandler}\n                onStart={onStartHandler}\n                // onProgress={(object)=> console.log(\"onProgress : \",object)}\n                onPlay={onPlayHandler}\n                // onSeek={(seconds)=> console.log(\"onSeek : \",seconds)}\n                // onDuration={(seconds)=> console.log(\"onDuration :\",seconds)}\n                onPause={onPauseHandler}\n                onEnded={onEndedHandler}\n            />\n        </div>\n    )\n}\n\nVideoPlayer.propTypes={\n    videoURL:PropTypes.string.isRequired,\n    ownerID:PropTypes.string.isRequired\n}\n\nexport default VideoPlayer;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport VideoPlayer from \"components/VideoPlayer\";\n\nconst Video = ({url,ownerID}) =>{\n\n\n    return(\n        <VideoPlayer\n            videoURL={url}\n            ownerID={ownerID}\n        />\n    )\n}\nVideo.propTypes={\n    url:PropTypes.string.isRequired,\n    ownerID:PropTypes.string.isRequired,\n}\n\nexport default Video;","import {gql} from 'apollo-boost';\n\nexport const GET_WIDEN_MEDIA = gql`\n    query getWidenMedia($workspace: Workspace!, $id: String!, $language: String!) {\n        response: jcr(workspace: $workspace) {\n            media: nodeById(uuid: $id) {\n                id: uuid\n                type: primaryNodeType{\n                    value:name\n                }\n                title:displayName(language:$language)\n                imageURL: property(name:\"wden:templatedUrl\"){\n                    value\n                }\n                videoURL: property(name:\"wden:videoStreamURL\"){\n                    value\n                }\n            }\n        }\n    }\n`\n\n\n","import get from \"lodash.get\";\n\nexport default function(mediaData) {\n// console.log(\"mediaData: \",mediaData);\n    return{\n        //NOTE be sure string value like \"false\" or \"true\" are boolean I use JSON.parse to cast\n        id: get(mediaData, \"id\"),\n        type: get(mediaData, \"type.value\"),\n        imageURL: get(mediaData, \"imageURL.value\"),\n        videoURL: get(mediaData, \"videoURL.value\")\n    }\n};","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {StoreContext} from \"contexts\";\nimport {useQuery} from \"@apollo/react-hooks\";\nimport {GET_WIDEN_MEDIA} from \"./WidenMediaGraphQL\";\nimport get from \"lodash.get\";\nimport MediaMapper from './WidenMediaModel';\n\n\nconst WidenImage = ({uuid}) => {\n    const _SIZE_ = '{size}';\n    const _SCALE_ = '{scale}';\n    const _QUALITY_ = '{quality}';\n    const width = '1024';\n    const scale = '1';\n    const quality = '72';\n\n    const { state } = React.useContext(StoreContext);\n    const { gql_variables} =  state.jContent;\n\n    const variables = Object.assign(gql_variables,{id:uuid})\n    const {loading, error, data} = useQuery(GET_WIDEN_MEDIA, {\n        variables: variables,\n    });\n\n    const [media, setMedia] = React.useState({});\n\n    React.useEffect(() => {\n        if(loading === false && data){\n            const media = MediaMapper(get(data, \"response.media\", {}));\n            media.imageURL=media.imageURL\n                .replace(_SIZE_,width)\n                .replace(_SCALE_,scale)\n                .replace(_QUALITY_,quality);\n            setMedia(media);\n        }\n    }, [loading,data]);\n\n    if (loading) return <img src={`https://via.placeholder.com/${width}x768/09f/fff?text=Loading`} alt=\"loading\"/>;\n    if (error) return <p>Error :(</p>;\n\n    return (\n        <>\n        {media &&\n            <img className=\"d-block w-100\"\n             src={media.imageURL}\n             alt={media.title}/>\n        }\n        </>\n    )\n}\n\nWidenImage.propTypes={\n    uuid:PropTypes.string.isRequired\n}\n\nexport default WidenImage;","import React from \"react\";\nimport {StoreContext} from \"contexts\";\nimport {useQuery} from \"@apollo/react-hooks\";\nimport {GET_WIDEN_MEDIA} from \"./WidenMediaGraphQL\";\nimport get from \"lodash.get\";\nimport MediaMapper from './WidenMediaModel';\nimport PropTypes from \"prop-types\";\nimport VideoPlayer from \"components/VideoPlayer\";\n\n\nconst WidenVideo = ({uuid, ownerID}) => {\n\n    const { state } = React.useContext(StoreContext);\n    const { gql_variables} =  state.jContent;\n\n    const variables = Object.assign(gql_variables,{id:uuid})\n    const {loading, error, data} = useQuery(GET_WIDEN_MEDIA, {\n        variables: variables,\n    });\n\n    const [media, setMedia] = React.useState({});\n\n    React.useEffect(() => {\n        if(loading === false && data){\n            const media = MediaMapper(get(data, \"response.media\", {}));\n            setMedia(media);\n        }\n    }, [loading,data]);\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error :(</p>;\n\n    return (\n        <>\n        {media.videoURL &&\n            <VideoPlayer\n                videoURL={media.videoURL}\n                ownerID={ownerID}\n            />\n        }\n        </>\n    )\n}\n\nWidenVideo.propTypes={\n    uuid:PropTypes.string.isRequired,\n    ownerID:PropTypes.string.isRequired,\n}\n\nexport default WidenVideo;","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport {StoreContext} from \"contexts\";\nimport Image from './components/Image';\nimport Video from './components/Video';\nimport WidenImage from './components/widen/WidenImage';\nimport WidenVideo from './components/widen/WidenVideo';\n\nconst Media = ({id,type,mixins,path,sourceID,alt}) => {\n    const { state } = React.useContext(StoreContext);\n    const {cnd_type,files_endpoint} = state.jContent;\n\n    // console.log(\"Media equals: \",type === cnd_type.WIDEN_IMAGE)\n    let component;\n    switch(type){\n        case cnd_type.WIDEN_IMAGE :\n            component = <WidenImage uuid={id} />\n            break;\n\n        case cnd_type.WIDEN_VIDEO :\n            component = <WidenVideo uuid={id} ownerID={sourceID} />\n            break;\n\n        case cnd_type.EXT_VIDEO:\n            component = <Video url={path} ownerID={sourceID} />\n            break;\n            \n        case cnd_type.JNT_FILE:\n            if(mixins.includes(cnd_type.IMAGE)){\n                component = <Image path={path} alt={alt}/>\n            }else{\n                component = <Video url={files_endpoint+encodeURI(path)} ownerID={sourceID} />\n            }\n            break;\n            \n        default:\n            component = <Image path={path} alt={alt}/>\n            break;\n    }\n    // console.log(\"Media component: \",component)\n    return(component)\n}\n\nMedia.propTypes={\n    id:PropTypes.string,\n    type:PropTypes.string.isRequired,\n    mixins:PropTypes.array.isRequired,\n    path:PropTypes.string,\n    sourceID:PropTypes.string,\n    alt:PropTypes.string\n}\n\nexport default Media;","import {makeStyles} from \"@material-ui/core/styles\";\n\nexport default makeStyles((theme)=> ({\n    textUppercase: {\n        textTransform: \"uppercase\"\n    },\n    subtitle: {\n        //, &::after\n        \"&::before\":{\n            backgroundColor:theme.palette.primary.main,\n            // background:`linear-gradient(90deg, ${theme.palette.text.primary} 0%, ${theme.palette.primary.main} 100%)`,\n            display: 'block',\n            width:`${theme.spacing(3)}px`,\n            height: `${theme.spacing(.25)}px`,\n            content:'\"\"',\n            margin: \"auto\",\n            marginTop: `${theme.spacing(1)}px`,\n        },\n        // borderLeft: `${theme.spacing(1)}px solid ${theme.palette.primary.main}`,\n        // paddingLeft: \"1rem\",\n        // marginLeft: \"1rem\"\n    },\n    item:{\n        position: 'relative',\n        display: 'none',\n        float: 'left',\n        width: '100%',\n        marginRight: '-100%',\n        backfaceVisibility: 'hidden',\n        transition:theme.transitions.create(['transform'],{\n            duration: theme.transitions.duration.long,\n            easing: theme.transitions.easing.easeInOut,\n        }),\n        \"& img\":{\n            minHeight: theme.geometry.item.minHeight,\n            objectFit: 'cover',\n        },\n        \"&.active\":{\n            display:'block'\n        }\n    },\n    showOverlay:{\n        \"&::before\":{\n            position:'absolute',\n            top:0, right:0, bottom:0, left:0,\n            content:'\"\"',\n            backgroundColor: theme.palette.background.overlay,\n            // TODO works see better choice\n            boxShadow: theme.palette.shadows.overlay,\n\n        }\n    },\n    caption:{\n        position: 'absolute',\n        top: '4rem',\n        '--percentage':`calc(100% - ${theme.geometry.caption.width})`,\n        right: 'calc(var(--percentage) / 2)',\n        left: 'calc(var(--percentage) / 2)',\n        zIndex: 10,\n        // color: theme.palette.common.white,\n        textAlign: 'center',\n        transition:theme.transitions.create(['top'],{\n            duration: theme.transitions.duration.standard,\n            easing: theme.transitions.easing.header,\n        }),\n\n        \".showResult &\": {\n            top: '7rem',\n            \"& button\":{\n                display:'none',\n            }\n        }\n    },\n}));","import React from 'react';\n// import PropTypes from \"prop-types\";\n\nimport {Button,Typography} from \"@material-ui/core\";\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nimport {StoreContext} from \"contexts\";\nimport Consent from \"components/Consent\";\nimport get from \"lodash.get\";\n\nimport {syncConsentStatus} from \"misc/tracker\";\nimport Media from '../Media'\nimport classnames from \"clsx\";\nimport cssSharedClasses from \"components/cssSharedClasses\";\nimport DOMPurify from \"dompurify\";\n\nconst useStyles = makeStyles(theme => ({\n    duration:{\n        display: 'flex',\n        alignItems: 'center',\n        flexWrap: 'wrap',\n        justifyContent: 'center',\n        '& svg': {\n            marginRight: '3px',\n        },\n        marginTop:`${theme.spacing(3)}px`,\n    },\n    description:{\n        // textAlign: 'left',\n        maxWidth:'500px',\n        margin:`${theme.spacing(4)}px auto`,\n\n    },\n    consent:{\n        position: 'absolute',\n        bottom: '.5rem',\n        '--percentage':`calc(100% - ${theme.geometry.caption.width})`,\n        right: 'calc(var(--percentage) / 2)',\n        left: 'calc(var(--percentage) / 2)',\n        zIndex: 10,\n        \"& ul\":{\n            listStyle: 'none',\n            padding:0,\n        },\n        \"& li\":{\n            marginBottom: '.5rem'\n        }\n    },\n    consentTitle:{\n        textTransform:'capitalize',\n        textDecoration:'underline'\n    }\n}));\n\nconst init = variables =>{\n    return {\n        ...variables,\n        consents:[]//list of consent\n    }\n}\n\n\nconst computeEnableStartBtn = (state) => {\n    const {showNext,workspace,consents} = state;\n\n    if(showNext && workspace !== \"LIVE\")\n        return true;\n\n    const granted = consents.filter( consent => consent.checked || consent.granted );\n    return consents.length === granted.length;\n}\n\n\nfunction reducer(state, action) {\n    const { payload } = action;\n\n    switch (action.case) {\n        case \"DATA_READY_CONSENT\":{\n            let {consents} = state;\n            const {consentData,scope,cxs,consent_status} = payload;\n            console.debug(\"[QUIZ] DATA_READY_CONSENT -> consentData :\",consentData);\n\n            const identifier = get(consentData, \"identifier\");\n\n            //compute granted\n            const consentPath = `consents[\"${scope}/${identifier}\"]`;\n            const cxsConsentStatus = get(cxs,`${consentPath}.status`);\n            const cxsConsentRevokeDate = get(cxs,`${consentPath}.revokeDate`);\n            const granted = consent_status.GRANTED === cxsConsentStatus\n                && Date.now() < Date.parse(cxsConsentRevokeDate)\n\n            consents = [...consents,{\n                id : get(consentData, \"id\"),\n                title : get(consentData, \"title\"),\n                description : get(consentData, \"description.value\"),\n                actived : JSON.parse(get(consentData, \"actived.value\", false)),\n                checked : false,\n                identifier,\n                granted\n            }];\n\n            return{\n                ...state,\n                consents,\n                enableStartBtn:computeEnableStartBtn({...state,consents})\n            }\n        }\n        case \"DENIED_CONSENT\":{\n            const {consents} = state;\n            const {id} = payload;\n            console.debug(\"[QUIZ] DENIED_CONSENT -> id :\",id);\n\n            return{\n                ...state,\n                consents:consents.map( consent => {\n                    if( consent.id === id)\n                        return {\n                            ...consent,\n                            granted:false\n                        };\n                    return consent\n                }),\n                enableStartBtn:false\n            }\n        }\n        case \"TOGGLE_CONSENT\": {\n            let {consents} = state;\n            const {id} = payload;\n            console.debug(\"[QUIZ] TOGGLE_CONSENT -> id :\",id);\n\n            consents = consents.map(consent => {\n                if(consent.id === id)\n                    return {\n                        ...consent,\n                        checked:!consent.checked\n                    };\n                return consent\n            });\n\n            return{\n                ...state,\n                consents,\n                enableStartBtn:computeEnableStartBtn({...state,consents})\n            }\n        }\n        default:\n            throw new Error(`[QUIZ] action case '${action.case}' is unknown `);\n    }\n}\n\nconst Quiz = (props) => {\n    const classes = useStyles(props);\n    const sharedClasses = cssSharedClasses(props);\n    const { state, dispatch } = React.useContext(StoreContext);\n\n    const {quiz,showNext,currentSlide,jContent,cxs} = state;\n    const {consent_status,scope,gql_variables,language_bundle} = jContent;\n\n    const [quizState, quizDispatch] = React.useReducer(\n        reducer,\n        {\n            enableStartBtn: showNext && gql_variables.workspace !== \"LIVE\",\n            workspace:gql_variables.workspace,\n            showNext\n        },\n        init\n    );\n\n    console.debug(\"*** paint quiz : \",quiz.title);\n    const show = currentSlide === quiz.id;\n\n    const onClick = () => {\n        quizState.consents.forEach(consent=>{\n            //already granted nothing to do\n            if(consent.granted)\n                return;\n\n            syncConsentStatus({\n                scope,\n                typeIdentifier:consent.identifier,\n                status:consent_status.GRANTED\n            });\n        })\n\n        dispatch({\n            case:\"NEXT_SLIDE\"\n        });\n    };\n\n\n    // className={classes.duration}\n    // {`game4-quiz__item show-overlay ${show ? 'active':''} `}\n    return(\n        <div className={classnames(\n            sharedClasses.item,\n            sharedClasses.showOverlay,\n            (show ? 'active':'')\n        )}>\n            {quiz.media &&\n            <Media id={quiz.media.id}\n                   type={quiz.media.type.value}\n                   mixins={quiz.media.mixins.map(mixin=>mixin.value)}\n                   path={quiz.media.path}\n                   alt={quiz.title}\n            />\n            }\n\n            <div className={sharedClasses.caption}>\n                <Typography className={sharedClasses.textUppercase}\n                            variant=\"h3\">\n                    {quiz.title}\n                </Typography>\n                <Typography className={sharedClasses.subtitle}\n                            color=\"primary\"\n                            variant=\"h4\">\n                    {quiz.subtitle}\n                </Typography>\n\n                <Typography component=\"div\"\n                            className={classes.duration}>\n                    <AccessTimeIcon />\n                    {quiz.duration}\n                </Typography>\n\n                <Typography component=\"div\"\n                            className={classes.description}\n                            dangerouslySetInnerHTML={{__html:DOMPurify.sanitize(quiz.description, { ADD_ATTR: ['target'] })}}/>\n\n                <Button onClick={onClick}\n                        disabled={!quizState.enableStartBtn}>\n                    {language_bundle && language_bundle.btnStart}\n                </Button>\n            </div>\n            {\n                quiz.consents.length > 0 && cxs &&\n                <div className={classes.consent}>\n                    <Typography className={classes.consentTitle}\n                                variant=\"h5\">\n                        {language_bundle && language_bundle.consentTitle}\n                    </Typography>\n                    <ul>\n                        {\n                            quiz.consents.map( consent =>{\n                                if(consent.actived)\n                                    return <Consent\n                                        key={consent.id}\n                                        id={consent.id}\n                                        quizState={quizState}\n                                        quizDispatch={quizDispatch}\n                                    />\n                                return <></>\n                            })\n                        }\n                    </ul>\n                </div>\n            }\n        </div>\n    );\n\n\n    // return(\n    //     <div className={`game4-quiz__item show-overlay ${show ? 'active':''} `}>\n    //         {quiz.media &&\n    //             <Media id={quiz.media.id}\n    //                    type={quiz.media.type.value}\n    //                    mixins={quiz.media.mixins.map(mixin=>mixin.value)}\n    //                    path={quiz.media.path}\n    //                    alt={quiz.title}\n    //             />\n    //         }\n    //\n    //         <div className=\"game4-quiz__caption\">\n    // <h2 className=\"text-uppercase\">{quiz.title}\n    //     <span className=\"subtitle\">{quiz.subtitle}</span>\n    // </h2>\n    //\n    //             <div className={\"duration\"}>\n    //                 <FontAwesomeIcon icon={['far','clock']} />\n    //                 {quiz.duration}\n    //             </div>\n    //\n    //             <div className=\"lead\" dangerouslySetInnerHTML={{__html:quiz.description}}></div>\n    //                 <Button variant=\"game4-quiz\"\n    //                         onClick={onClick}\n    //                         disabled={!quizState.enableStartBtn}>\n    //                     {language_bundle && language_bundle.btnStart}\n    //                 </Button>\n    //         </div>\n    //         {\n    //             quiz.consents.length > 0 && cxs &&\n    //             <div className=\"game4-quiz__consent\">\n    //                 <h5>{language_bundle && language_bundle.consentTitle}</h5>\n    //                 <ul>\n    //                     {\n    //                         quiz.consents.map( consent =>{\n    //                             if(consent.actived)\n    //                                 return <Consent\n    //                                     key={consent.id}\n    //                                     id={consent.id}\n    //                                     quizState={quizState}\n    //                                     quizDispatch={quizDispatch}\n    //                                 />\n    //                             return <></>\n    //                         })\n    //                     }\n    //                 </ul>\n    //             </div>\n    //         }\n    //     </div>\n    // );\n}\n\n// Quiz.propTypes={}\n\nexport default Quiz;","import React from \"react\";\nimport {StoreContext} from \"contexts\";\nimport PropTypes from \"prop-types\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport classnames from 'clsx';\n\nconst useStyles = makeStyles(theme => ({\n    indicator: {\n        boxSizing: 'content-box',\n        flex: '0 1 auto',\n        width: theme.geometry.indicator.width,\n        height: theme.geometry.indicator.height,\n        marginRight: theme.geometry.indicator.spacer,\n        marginLeft: theme.geometry.indicator.spacer,\n        textIndent: '-999px',\n\n        backgroundColor: theme.palette.common.white,\n        backgroundClip: 'padding-box',\n        // Use transparent borders to increase the hit area by 10px on top and bottom.\n        borderTop: `${theme.geometry.indicator.hitAreaHeight} solid transparent`,\n        borderBottom: `${theme.geometry.indicator.hitAreaHeight} solid transparent`,\n        opacity: '.5',\n        transition:theme.transitions.create(['opacity'],{\n            duration: theme.transitions.duration.long,\n            easing: theme.transitions.easing.ease,\n        }),\n        \".showResult &\": {\n            backgroundColor:theme.palette.grey[900],\n        },\n        \"&.clickable\":{\n            cursor: 'pointer',\n        },\n        \"&.active\": {\n            opacity: 1\n        }\n    }\n}));\n\nconst Indicator = (props) =>{\n    const classes = useStyles(props);\n\n    const { state, dispatch } = React.useContext(StoreContext);\n    const {currentSlide} = state;\n    const {id,enabled} = props;\n\n    const active = currentSlide === id;\n    const handleCLick = () =>{\n        if(enabled)\n            dispatch({\n                case:\"SHOW_SLIDE\",\n                payload:{\n                    slide:id\n                }\n            });\n    };\n\n    return(\n        <li className={classnames(\n            classes.indicator,\n            (active ? 'active':''),\n            (enabled ? 'clickable':'')\n        )}\n            onClick={handleCLick}>\n        </li>\n    )\n}\n\nIndicator.propTypes={\n    id:PropTypes.string.isRequired,\n    enabled:PropTypes.bool.isRequired\n}\n\nexport default Indicator;","import {gql} from 'apollo-boost';\n\n// const propsFragment = gql`\n//     fragment props on JCRNode{\n//         id:uuid\n//         key: property(language:$language, name:\"game4:quizKey\"){\n//             value\n//         }\n//         title:displayName(language:$language)\n//         subtitle: property(language:$language, name:\"game4:subtitle\"){\n//             value\n//         }\n//         description:property(language:$language,name:\"game4:description\"){\n//             value\n//         }\n//         duration:property(language:$language,name:\"game4:duration\"){\n//             value\n//         }\n//         cover: property(language:$language,name:\"game4:cover\"){\n//             node: refNode {\n//                 path\n//             }\n//         }\n//         consent: property(language:$language,name:\"game4:consentType\"){\n//             node: refNode {\n//                 uuid\n//             }\n//         }\n//         children{\n//             nodes {\n//                 id:uuid\n//                 type: primaryNodeType{\n//                     value:name\n//                 }\n//             }\n//         }\n//     }\n// `\n\nexport const GET_QNA = gql`\n    query getQna($workspace: Workspace!, $id: String!, $language: String!) {\n        response: jcr(workspace: $workspace) {\n            qna: nodeById(uuid: $id) {\n                id: uuid\n                title:displayName(language:$language)\n                question: property(language:$language, name:\"game4:question\"){\n                    value\n                }\n                help: property(language:$language,name:\"game4:help\"){\n                    value\n                }\n                nbExpectedAnswer: property(name:\"game4:nbExpectedAnswer\"){\n                    value\n                }\n                answers: property(language:$language,name:\"game4:answers\"){\n                    values\n                }\n                randomSelection: property(name:\"game4:randomSelection\"){\n                    value\n                }\n                notUsedForScore: property(name:\"game4:notUsedForScore\"){\n                    value\n                }\n                media: property(language:$language,name:\"wden:mediaNode\",){\n                    node: refNode {\n                        id: uuid\n                        type: primaryNodeType{\n                            value:name\n                        }\n                        mixins: mixinTypes{\n                            value:name\n                        }\n                        path\n                    }\n                }\n                jExpField2Map: property(name:\"game4:jExpProperty\"){\n                    value\n                }\n\n            }\n        }\n    }\n`\n// ${propsFragment}\n\n\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport {Radio, Checkbox, FormControlLabel, FormGroup} from \"@material-ui/core\";\nimport CheckIcon from \"@material-ui/icons/Check\";\nimport ClearIcon from '@material-ui/icons/Clear';\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport classnames from 'clsx';\n\nconst useStyles = makeStyles(theme => ({\n    answerGroup: {\n        display:\"flex\",\n        alignItems:\"center\",\n        flexWrap:'wrap',\n        \".showResult &\":{\n            \"&.checked\":{\n                backgroundColor: theme.palette.background.checkedAnswer,\n                borderRadius: theme.geometry.checkedAnswer.borderRadius,\n                \"& .MuiTypography-body1\":{\n                    color: theme.palette.grey[900],\n                },\n                \"& + div::before\":{\n                    borderTop: '2px solid transparent',\n                },\n                \"&:last-child\":{\n                        borderBottom: '2px solid transparent',\n                    },\n                \"::before\":{\n                        borderTop: '2px solid transparent',\n                }\n            }\n        }\n    },\n    checkGroup:{\n        position:\"relative\",\n        height:'1.5rem',\n        padding:'.15rem .25rem .15rem .15rem',\n        marginLeft:\"-32px\",\n        opacity: 0,\n        // transform: none,\n        transition:theme.transitions.create(['opacity'],{\n            easing: theme.transitions.easing.easeOut,\n        }),\n        borderRadius: '5px 0px 0px 5px',\n        backgroundColor: theme.palette.grey[300],\n        zIndex: 1,\n        \".showResult &\":{\n            opacity: 1,\n        },\n        \"&::after\":{\n            content: '\"\"',\n            width: 0,\n            height: 0,\n            borderStyle: 'solid',\n            borderWidth: '.9rem 0 .9rem 1.15rem',\n            position: 'absolute',\n            top: 0,\n            // right:'-1.1rem',\n            left:'1.9rem',\n            borderColor:  `transparent transparent transparent ${theme.palette.grey[300]}`\n        },\n        \"&.valid\":{\n            backgroundColor:theme.palette.primary.main,\n            color:\"rgba(255, 255, 255, 0.87)\",\n            \"&::after\":{\n               borderColor:  `transparent transparent transparent ${theme.palette.primary.main}`\n            }\n        },\n    },\n    labelGroup:{\n        marginLeft:\"12px\"\n    }\n}));\n\nconst Answer = (props) =>{\n    const classes = useStyles(props);\n    const {qna, qnaDispatch,id} = props;\n    const [answer] = qna.answers.filter(answer => answer.id === id);\n\n    const isValid = answer.isAnswer || (qna.notUsedForScore ? answer.checked : false);\n    const handleChange = () =>\n        qnaDispatch({\n            case:\"TOGGLE_ANSWER\",\n            payload:{\n                answer\n            }\n        });\n\n    const getResultIcon = () =>{\n        if(isValid)\n            return <CheckIcon />\n        return <ClearIcon />\n    };\n\n    const getControl = () =>{\n        if(\"checkbox\"===qna.inputType)\n            return <Checkbox id={answer.id} />\n        return <Radio id={answer.id}/>\n    };\n\n    return(\n        // <li className={answer.checked?\"checked\":\"\"}>\n        //     <FormGroup row aria-label=\"answer\">\n        <div className={classnames(\n            classes.answerGroup,\n            (answer.checked?\"checked\":\"\")\n        )}>\n            <div className={classnames(\n                classes.checkGroup,\n                (isValid?\"valid\":\"\")\n            )}>\n                {getResultIcon()}\n            </div>\n            <FormControlLabel\n                className={classes.labelGroup}\n                // value={answer.checked}\n                control={getControl()}\n                label={answer.label}\n                labelPlacement=\"end\"\n                onChange={handleChange}\n                checked={answer.checked}\n            />\n        </div>\n\n            // </FormGroup>\n        // </li>\n    );\n\n    // return(\n    //     <li className={answer.checked?\"checked\":\"\"}>\n    //         <div className={`result ${isValid?\"valid\":\"\"}`}>\n    //             {isValid &&\n    //                 <FontAwesomeIcon icon={['fas','check']}/>\n    //             }\n    //             {!isValid &&\n    //                 <FontAwesomeIcon icon={['fas','times']}/>\n    //             }\n    //         </div>\n    //         <Form.Check\n    //             custom\n    //             type={qna.inputType}\n    //             name={qna.id}\n    //             id={answer.id}\n    //             label={answer.label}\n    //             onChange={handleChange}\n    //             checked={answer.checked}\n    //         />\n    //     </li>\n    // );\n};\n\nAnswer.propTypes={\n    qna:PropTypes.object.isRequired,\n    qnaDispatch:PropTypes.func.isRequired,\n    id:PropTypes.string.isRequired,\n}\n\nexport default Answer;","\nconst _WEAKREFERENCE_ = \"WEAKREFERENCE\";\n//TODO voir si avec SDL je peux passe l'URL des images!\nfunction getProperties(properties,context){\n    if(!properties) return;\n    return properties.reduce(function(bundle,property){\n        const key = property.name.split(\":\").pop();\n        let value = property.value || property.values;\n// console.log(\"property : \",property);\n        if(property.type === _WEAKREFERENCE_ &&\n            property.weakreference &&\n            property.weakreference.path\n        ){\n            property.weakreference.url=\n                `${context.files_endpoint}${encodeURI(property.weakreference.path)}`;\n            value = property.weakreference;\n        }\n\n        bundle[key]=value;\n        return bundle;\n    },{});\n};\n\n// function getWeakURL(filesEndpoint,nodePath){\n//     return `${filesEndpoint}${encodeURI(nodePath)}`;///encodeURIComponent()\n// };\n\nfunction getRandomString (length, format){\n    let mask = \"\";\n    if (format.indexOf(\"a\") > -1) mask += \"abcdefghijklmnopqrstuvwxyz\";\n    if (format.indexOf(\"A\") > -1) mask += \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    if (format.indexOf(\"#\") > -1) mask += \"0123456789\";\n    if (format.indexOf(\"!\") > -1) mask += \"~`!@#$%^&*()_+-={}[]:\\\";'<>?,./|\\\\\";\n    let result = \"\";\n    for (let i = length; i > 0; --i) result += mask[Math.floor(Math.random() * mask.length)];\n    return result;\n};\n\nfunction getGQLWorkspace(workspace){\n    return workspace===\"default\"?\n        \"EDIT\":\n        workspace.toUpperCase()\n}\n\nexport {\n    getProperties,\n    getRandomString,\n    getGQLWorkspace\n}","import get from \"lodash.get\";\nimport {getRandomString} from \"misc/utils\";\n\nexport default function(qnaData){\n    const randomSelection=JSON.parse(get(qnaData, \"randomSelection.value\", false));\n    const answers= get(qnaData, \"answers.values\", []).map(answer=>{\n        const controlledAnswer = JSON.parse(answer);\n        return {\n            ...controlledAnswer,\n            id:getRandomString(5,\"#aA\"),\n            checked:false\n        }\n\n        // const id = getRandomString(5,\"#aA\");\n        // const valid = answer.indexOf(quiz_validMark) === 0;\n        // if(valid)\n        //     answer = answer.substring(quiz_validMark.length+1);//+1 is for space between mark and label\n\n        // return {id,label:answer,checked:false,valid}\n    })\n\n    if(randomSelection)\n        answers.sort( (a,b) => a.id > b.id );\n\n    const inputType = answers.filter(answer => answer.isAnswer).length > 1 ?\"checkbox\":\"radio\"\n\n    return {\n        id: get(qnaData, \"id\"),\n        title: get(qnaData, \"title\"),\n        question: get(qnaData, \"question.value\", \"\"),\n        help: get(qnaData, \"help.value\", \"\"),\n        notUsedForScore: JSON.parse(get(qnaData, \"notUsedForScore.value\", false)),\n        // cover: get(qnaData, \"cover.node.path\", \"\"),\n        media: get(qnaData, \"media.node\", {}),\n        jExpField2Map: get(qnaData, \"jExpField2Map.value\", \"\"),\n        randomSelection,\n        answers,\n        inputType\n    }\n}","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport {useQuery} from \"@apollo/react-hooks\";\nimport get from \"lodash.get\";\n\nimport {StoreContext} from \"contexts\";\n\nimport {GET_QNA} from \"./QnaGraphQL\";\nimport Answer from \"./Answer\";\n\nimport QnaMapper from \"components/Qna/QnaModel\";\nimport {syncVisitorData} from \"misc/tracker\";\nimport Media from \"components/Media\";\nimport cssSharedClasses from \"components/cssSharedClasses\";\nimport classnames from \"clsx\";\nimport {FormGroup, Typography,Button} from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\n\nconst useStyles = makeStyles(theme => ({\n    questionGroup:{\n        textAlign:'left',\n        marginTop: `${theme.spacing(2)}px`,\n        marginBottom: `${theme.spacing(4)}px`,\n    },\n    question:{\n        marginBottom: `${theme.spacing(1)}px`,\n    },\n    formGroup: {\n        textAlign:'left',\n        \"& > div::before\":{\n            flexBasis:'100%',\n            content:'\"\"',\n            height: '2px',\n            marginLeft : '50px',\n            borderTop: '2px solid rgba(255,255,255,.2)',\n        },\n        \"&  > div:first-child::before\":{\n            borderTop: 'none',\n        },\n        \"&  > div:last-child::after\":{\n            flexBasis:'100%',\n            content:'\"\"',\n            height: '2px',\n            marginLeft : '50px',\n            borderBottom: '2px solid rgba(255,255,255,.2)',\n        },\n        marginBottom:`${theme.spacing(4)}px`\n    },\n}));\n\n\nconst initialQNA = {\n    enableSubmit:false,\n}\n\nconst reducer = (qna, action) => {\n    const { payload } = action;\n\n    switch (action.case) {\n        case \"DATA_READY\": {\n            // const {qnaData,quiz_validMark} = payload;\n            const {qnaData} = payload;\n            console.debug(\"[QNA] DATA_READY -> qnaData :\",qnaData);\n\n            return {\n                ...qna,\n                ...QnaMapper(qnaData)\n            }\n        }\n        case \"TOGGLE_ANSWER\": {\n            const {answer} = payload;//answer id\n            console.debug(\"[QNA] TOGGLE_ANSWER -> answer :\",answer);\n            let {answers} = qna;\n            if(qna.inputType === \"radio\")\n                answers = answers.map( answer =>{ return {...answer,checked:false} });\n\n            answers = answers.map(_answer => {\n                if(_answer.id === answer.id)\n                    return {\n                        ..._answer,\n                        checked:!_answer.checked\n                    };\n                return _answer\n            });\n            const enableSubmit = answers.filter(answer => answer.checked).length > 0\n\n            return{\n                ...qna,\n                answers,\n                enableSubmit\n            }\n        }\n        case \"RESET\":{\n            const {qnaData} = payload;\n            console.debug(\"[QNA] RESET -> qnaData :\",qnaData);\n            return{\n                ...initialQNA,\n                ...QnaMapper(qnaData)\n            }\n        }\n        default:\n            throw new Error(`[QNA] action case '${action.case}' is unknown `);\n    };\n}\n\nconst Qna = (props) => {\n    const classes = useStyles(props);\n    const sharedClasses = cssSharedClasses(props);\n    const { state, dispatch } = React.useContext(StoreContext);\n    const { currentSlide,jContent,reset } = state;\n    const { gql_variables,language_bundle } =  jContent;\n\n    const variables = Object.assign(gql_variables,{id:props.id})\n    const {loading, error, data} = useQuery(GET_QNA, {\n        variables:variables,\n    });\n\n    const [qna, qnaDispatch] = React.useReducer(\n        reducer,\n        initialQNA\n    );\n\n    React.useEffect(() => {\n        if(loading === false && data){\n            const qnaData = get(data, \"response.qna\", {});\n            qnaDispatch({\n                case:\"DATA_READY\",\n                payload:{\n                    qnaData\n                }\n            });\n        }\n    }, [loading,data]);\n\n    React.useEffect(() => {\n        if(reset && data){\n            const qnaData = get(data, \"response.qna\", {});\n            qnaDispatch({\n                case:\"RESET\",\n                payload:{\n                    qnaData\n                }\n            });\n        }\n    }, [reset,data]);\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error :(</p>;\n    console.debug(\"*** paint qna : \",qna.title);\n\n    const show = currentSlide === props.id;\n\n    const handleSubmit = () => {\n        if(qna.notUsedForScore){\n            dispatch({\n                case:\"NEXT_SLIDE\"\n            });\n        }else{\n            dispatch({\n                case:\"SHOW_RESULT\",\n                payload:{\n                    result: qna.answers\n                            .filter(answer => answer.isAnswer)\n                            .reduce( (test,answer) => test && answer.checked,true)\n                }\n            });\n        }\n        // dispatch({\n        //     case:\"SHOW_RESULT\",\n        //     payload:{\n        //         result:qna.notUsedForScore ?\n        //                 true :\n        //                 qna.answers\n        //                 .filter(answer => answer.isAnswer)\n        //                 .reduce( (test,answer) => test && answer.checked,true)\n        //     }\n        // });\n\n        // console.log(\"[handleSubmit] qna.jExpField2Map => \",qna.jExpField2Map);\n        if(qna.jExpField2Map){\n            //Get response cdpValue\n            //Note case multiple is manage by comma separated case\n            const values =\n                qna.answers\n                .filter(answer => answer.checked)\n                .reduce(\n                    (item,answer,index) =>{\n                        if(answer.cdpValue && answer.cdpValue.length > 0) {\n                            if (index === 0) {\n                                //workaround\n                                let cdpValue = answer.cdpValue;\n                                if(cdpValue==='true') cdpValue=true;\n                                if(cdpValue==='false') cdpValue=false;\n                                item = cdpValue\n                            } else {\n                                item = `${item}, ${answer.cdpValue}`\n                            }\n                        }\n                        return item;\n                    },null\n                );\n            // console.debug(\"[handleSubmit] update : \",qna.jExpField2Map,\" with values : \",values);\n\n            //if tracker is not initialized the track event is not send\n            syncVisitorData({\n                propertyName:`properties.${qna.jExpField2Map}`,\n                propertyValue:values\n            })\n        }\n    }\n\n    const getAnswers = () => {\n        if(qna.answers)\n            return qna.answers.map( answer =>\n                <Answer\n                    key={answer.id}\n                    id={answer.id}\n                    qna={qna}\n                    qnaDispatch={qnaDispatch}\n                />);\n    }\n\n    return(\n        <div className={classnames(\n            sharedClasses.item,\n            sharedClasses.showOverlay,\n            (show ? 'active':'')\n        )}>\n            {qna.media &&\n                <Media id={qna.media.id}\n                       type={qna.media.type.value}\n                       mixins={qna.media.mixins.map(mixin=>mixin.value)}\n                       path={qna.media.path}\n                       alt={qna.title}\n                />\n\n            }\n\n            <div className={sharedClasses.caption}>\n                <div className={classes.questionGroup}>\n                    <Typography  className={classes.question}\n                                 variant=\"h4\">\n                        {qna.question}\n                    </Typography>\n                    <Typography variant=\"h5\">\n                        {qna.help}\n                    </Typography>\n                </div>\n\n\n                {/*<ol className=\"game4-quiz__answer-list\">*/}\n                <FormGroup className={classes.formGroup}\n                           style={{}}\n                           aria-label=\"answer\">\n                    {getAnswers()}\n                </FormGroup>\n                {/*</ol>*/}\n\n                <Button onClick={handleSubmit}\n                        disabled={!qna.enableSubmit}>\n                    {language_bundle && language_bundle.btnSubmit}\n                </Button>\n            </div>\n        </div>\n    );\n\n    // return(\n    //     <div className={classnames(\n    //         sharedClasses.item,\n    //         sharedClasses.showOverlay,\n    //         (show ? 'active':'')\n    //     )}>\n    //         {qna.media &&\n    //         <Media id={qna.media.id}\n    //                type={qna.media.type.value}\n    //                mixins={qna.media.mixins.map(mixin=>mixin.value)}\n    //                path={qna.media.path}\n    //                alt={qna.title}\n    //         />\n    //\n    //         }\n    //\n    //         <div className=\"game4-quiz__caption d-none d-md-block\">\n    //             <fieldset>\n    //                 <legend>{qna.question}\n    //                     <i>{qna.help}</i>\n    //                 </legend>\n    //                 {qna.answers &&\n    //                 <ol className=\"game4-quiz__answer-list\">\n    //                     {qna.answers.map( answer =>\n    //                         <Answer\n    //                             key={answer.id}\n    //                             id={answer.id}\n    //                             qna={qna}\n    //                             qnaDispatch={qnaDispatch}\n    //                         />)\n    //                     }\n    //                 </ol>\n    //                 }\n    //             </fieldset>\n    //\n    //             <Button variant=\"game4-quiz\"\n    //                     onClick={handleSubmit}\n    //                     disabled={!qna.enableSubmit}>\n    //                 {language_bundle && language_bundle.btnSubmit}\n    //             </Button>\n    //\n    //         </div>\n    //     </div>\n    // );\n}\n\nQna.propTypes={\n    id:PropTypes.string.isRequired\n}\n\nexport default Qna;","import {gql} from 'apollo-boost';\n\n// cover: property(name:\"game4:masterQnaCover\"){\n//     node: refNode {\n//         path\n//     }\n// }\n\nexport const GET_WARMUP = gql`\n    query getWarmup($workspace: Workspace!, $id: String!, $language: String!) {\n        response: jcr(workspace: $workspace) {\n            warmup: nodeById(uuid: $id) {\n                id: uuid\n                title:displayName(language:$language)\n                subtitle: property(language:$language, name:\"game4:subtitle\"){\n                    value\n                }\n                content: property(language:$language,name:\"game4:content\"){\n                    value\n                }\n                duration: property(name:\"game4:qnaDuration\"){\n                    value\n                }\n                videoLink: property(name:\"game4:videoLink\"){\n                    value\n                }\n                videoExtPath: property(language:$language,name:\"game4:videoExtPath\"){\n                    value\n                }\n                videoIntPath: property(language:$language,name:\"game4:videoIntPath\"){\n                    node: refNode {\n                        id: uuid\n                        type: primaryNodeType{\n                            value:name\n                        }\n                        path\n                    }\n                }\n                media: property(language:$language,name:\"wden:mediaNode\",){\n                    node: refNode {\n                        id: uuid\n                        type: primaryNodeType{\n                            value:name\n                        }\n                        mixins: mixinTypes{\n                            value:name\n                        }\n                        path\n                    }\n                }\n                children{\n                    nodes {\n                        id: uuid\n                        type: primaryNodeType{\n                            value:name\n                        }\n                    }\n                }\n    \n            }\n        }\n    }\n`","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport get from \"lodash.get\";\nimport {useQuery} from \"@apollo/react-hooks\";\n\nimport {StoreContext} from \"contexts\";\nimport {GET_WARMUP} from \"./WarmupGraphQL\";\nimport Qna from \"components/Qna\";\nimport WarmupMapper from \"components/Warmup/WarmupModel\";\nimport Media from \"components/Media\";\nimport classnames from \"clsx\";\nimport cssSharedClasses from \"components/cssSharedClasses\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Typography, Button} from \"@material-ui/core\";\nimport DOMPurify from \"dompurify\";\n\nconst useStyles = makeStyles(theme => ({\n    contentGroup:{\n        textAlign:'justify',\n        maxWidth:'800px',\n        margin:\"auto\",\n        marginBottom:`${theme.spacing(4)}px`\n    }\n}));\n\nconst Warmup = (props) => {\n    const classes = useStyles(props);\n    const sharedClasses = cssSharedClasses(props);\n    const { state, dispatch } = React.useContext(StoreContext);\n    const { currentSlide,jContent} = state;\n    const { gql_variables,cnd_type,language_bundle } =  jContent;\n\n    const variables = Object.assign(gql_variables,{id:props.id})\n    // const query = loader(\"./Warmup.graphql.disabled\");\n    const {loading, error, data} = useQuery(GET_WARMUP, {\n        variables:variables,\n    });\n\n    const [warmup, setWarmup] = React.useState({childNodes:[]});\n\n    React.useEffect(() => {\n\n        if(loading === false && data){\n            const warmup = WarmupMapper(get(data, \"response.warmup\", {}),cnd_type)\n            dispatch({\n                case:\"ADD_SLIDES\",\n                payload:{\n                    slides:warmup.childNodes.map(node=>node.id),\n                    parentSlide:warmup.id\n                }\n            });\n            // console.debug(\"warmup.id : \",warmup.id,\"; warmup.video : \",warmup.video);\n            setWarmup(warmup);\n        }\n    },[loading,data]);\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error :(</p>;\n    console.debug(\"*** paint warmup : \",warmup.title);\n\n    const show = currentSlide === props.id;\n    const handleCLick = () =>\n        dispatch({\n            case:\"NEXT_SLIDE\"\n        });\n\n    return(\n        <>\n            <div className={classnames(\n                sharedClasses.item,\n                sharedClasses.showOverlay,\n                (show ? 'active':'')\n            )}>\n                {warmup.media &&\n                    <Media id={warmup.media.id}\n                           type={warmup.media.type.value}\n                           mixins={warmup.media.mixins.map(mixin=>mixin.value)}\n                           path={warmup.media.path}\n                           alt={warmup.title}\n                    />\n                }\n\n                <div className={sharedClasses.caption}>\n                    <Typography className={sharedClasses.textUppercase}\n                                variant=\"h3\">\n                        {warmup.title}\n                    </Typography>\n                    <Typography className={sharedClasses.subtitle}\n                                color=\"primary\"\n                                variant=\"h4\">\n                        {warmup.subtitle}\n                    </Typography>\n\n                    <div className={classes.contentGroup}>\n                        <Typography component=\"div\"\n                                    className={classes.content}\n                                    dangerouslySetInnerHTML={{__html:DOMPurify.sanitize(warmup.content, { ADD_ATTR: ['target'] })}}/>\n\n                        { warmup.video != null &&\n                        <div>\n                            <Media id={warmup.video.id || null}\n                                   type={warmup.video.type.value}\n                                   mixins={[]}\n                                   path={warmup.video.path}\n                                   sourceID={warmup.id}\n                            />\n                        </div>\n                        }\n                    </div>\n\n\n                    <Button onClick={ handleCLick }>\n                        {language_bundle && language_bundle.btnQuestion}\n                    </Button>\n                </div>\n            </div>\n            {warmup.childNodes.map( node =>\n                <Qna\n                    key={node.id}\n                    id={node.id}\n                />\n            )}\n        </>\n    );\n}\n\nWarmup.propTypes={\n    id:PropTypes.string.isRequired\n}\n\nexport default Warmup;","import get from \"lodash.get\";\n\nexport default function(warmupData,cnd_type) {\n    let video = null;\n    const videoLink = get(warmupData, \"videoLink.value\", \"\");\n    const videoIntPath = get(warmupData, \"videoIntPath.node\");\n\n    if(videoLink)\n        video= videoIntPath ?\n            videoIntPath:{\n                id:null,\n                type:{\n                    value:cnd_type.EXT_VIDEO\n                },\n                path:get(warmupData, \"videoExtPath.value\")\n            }\n\n\n    // cover: get(warmupData, \"cover.node.path\", \"\"),\n    return{\n        id: get(warmupData, \"id\", \"\"),\n        title: get(warmupData, \"title\", \"\"),\n        subtitle: get(warmupData, \"subtitle.value\", \"\"),\n        content: get(warmupData, \"content.value\", \"\"),\n        duration: get(warmupData, \"duration.value\", \"\"),\n        media: get(warmupData, \"media.node\", {}),\n        childNodes: get(warmupData,\"children.nodes\",[])\n                    .map(node => {\n                        return{\n                            id: get(node, \"id\"),\n                            type: get(node, \"type.value\")\n                        }\n                    }),\n        video\n    }\n}","import {gql} from 'apollo-boost';\n\nexport const GET_PERSONALIZED_RESULT = gql`\n    query getPersonalizedResultContent($workspace: Workspace!, $id: String!, $language: String!,$profileId: String,$sessionId: String) {\n        response: jcr(workspace: $workspace) {\n            result: nodeById(uuid: $id) {\n                jExperience: jExperience(profileId: $profileId, sessionId: $sessionId) {\n                    variant:personalizedVariant{\n                        id: uuid\n                        title:displayName(language:$language)\n                        text:property(language:$language,name:\"text\"){\n                            value\n                        }\n                    }\n                }\n            }\n        }\n    }\n`\n\n\n","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport {StoreContext} from \"contexts\";\nimport {useQuery} from \"@apollo/react-hooks\";\nimport {GET_PERSONALIZED_RESULT} from \"./PersonalizedGraphQL\";\nimport get from \"lodash.get\";\nimport DOMPurify from \"dompurify\";\nimport {Typography} from \"@material-ui/core\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n    result:{\n        marginTop: `${theme.spacing(4)}px`,\n    }\n}));\n\nconst Personalized = (props) => {\n    const {id,cxs}=props;\n    const classes = useStyles(props);\n    const { state } = React.useContext(StoreContext);\n    const { jContent } = state;\n\n    const [result, setResult] = React.useState({});\n\n    const {loading, error, data} = useQuery(GET_PERSONALIZED_RESULT, {\n        variables:Object.assign(jContent.gql_variables,{\n            profileId:cxs.profileId,\n            sessionId:cxs.sessionId,\n            id\n        }),\n        fetchPolicy: \"no-cache\"\n    });\n\n    React.useEffect(() => {\n        if(loading === false && data){\n            const persoData = get(data, \"response.result.jExperience.variant\", {});\n            setResult({\n                ...persoData,\n                text:persoData.text.value\n            });\n        }\n    }, [loading,data]);\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error :(</p>;\n    console.debug(\"*** paint personalized result : \",result.title);\n\n    // console.log(\"Personalized props.show :\",props.show);\n\n    return(\n        <Typography className={classes.result}\n                    component=\"div\"\n                    dangerouslySetInnerHTML={{__html:DOMPurify.sanitize(result.text, { ADD_ATTR: ['target'] })}}/>\n    );\n\n    // return(\n    //     <div className=\"game4-quiz__score-result col-6 offset-3 col-md-4 offset-md-4 mb-5\"\n    //          dangerouslySetInnerHTML={{__html:DOMPurify.sanitize(result.text, { ADD_ATTR: ['target'] })}}>\n    //     </div>\n    // );\n}\n\nPersonalized.propTypes={\n    id:PropTypes.string.isRequired,\n    cxs:PropTypes.object.isRequired\n}\n\nexport default Personalized;","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport { CircularProgressbar } from 'react-circular-progressbar';\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n    result:{\n        marginTop: `${theme.spacing(4)}px`,\n        maxWidth: '500px',\n        margin: '32px auto',\n        \"& .CircularProgressbar\":{\n            \"& .CircularProgressbar\":{\n                \"&-text\":{\n                    fill: theme.palette.primary.main,\n                },\n                \"&-trail\": {\n                    stroke: theme.palette.grey[300],\n                },\n                \"&-path\": {\n                    stroke: theme.palette.primary.main,\n                },\n            }\n        }\n    }\n}));\n\nconst Percentage = (props) => {\n    const {score} = props\n    const classes = useStyles(props);\n    console.debug(\"*** paint percentage result : \",score);\n    return(\n            <div className={classes.result}>\n                <CircularProgressbar value={score} text={`${score}%`}/>\n            </div>\n    );\n}\n\nPercentage.propTypes={\n    score:PropTypes.number.isRequired\n}\n\nexport default Percentage;","import React from 'react';\nimport {StoreContext} from \"contexts\";\n\nimport Media from \"components/Media\";\nimport Personalized from \"components/Score/personalized/Personalized\";\nimport Percentage from \"components/Score/percentage/Percentage\";\nimport cssSharedClasses from \"components/cssSharedClasses\";\nimport classnames from \"clsx\";\nimport {Typography,Button} from \"@material-ui/core\";\n\nconst Score = (props) => {\n    const sharedClasses = cssSharedClasses(props);\n    const { state,dispatch } = React.useContext(StoreContext);\n    const { quiz,currentSlide,score,scoreIndex,jContent,cxs } = state;\n    const { language_bundle } =  jContent;\n\n    const show = currentSlide === scoreIndex;\n\n    const onClick = () => {\n        dispatch({\n            case:\"RESET\"\n        });\n    }\n    const displayResult = () => {\n        if(quiz.personalizedResult.id){\n            if(cxs)\n                return <Personalized id={quiz.personalizedResult.id} cxs={cxs}/>\n            return <p>cxs is loading...</p>\n        }\n        return <Percentage score={score}/>\n    }\n    // {quiz.personalizedResult.id && <Personalized id={quiz.personalizedResult.id}/>}\n    // {!quiz.personalizedResult.id && <Percentage score={score}/>}\n    // <div className=\"game4-quiz__score-result col-6 offset-3 col-md-4 offset-md-4 mb-5\">\n    //     <CircularProgressbar value={score} text={`${score}%`}/>\n    // </div>\n    console.log(\"[Score] quiz.personalizedResult.id: \",quiz.personalizedResult.id);\n\n    return(\n        <div className={classnames(\n            sharedClasses.item,\n            sharedClasses.showOverlay,\n            (show ? 'active':'')\n        )}>\n            {quiz.media &&\n            <Media id={quiz.media.id}\n                   type={quiz.media.type.value}\n                   mixins={quiz.media.mixins.map(mixin=>mixin.value)}\n                   path={quiz.media.path}\n                   alt={quiz.title}\n            />\n            }\n            <div className={sharedClasses.caption}>\n                <Typography className={sharedClasses.textUppercase}\n                            variant=\"h3\">\n                    {quiz.title}\n                    <Typography className={sharedClasses.subtitle}\n                                color=\"primary\"\n                                variant=\"subtitle1\"\n                                component=\"span\">\n                        {quiz.subtitle}\n                    </Typography>\n                </Typography>\n\n                {displayResult()}\n\n                <Button onClick={onClick}>\n                    {language_bundle && language_bundle.btnReset}\n                </Button>\n            </div>\n        </div>\n    );\n\n    // return(\n    //     <div className={`game4-quiz__item show-overlay ${show ? 'active':''} `}>\n    //         {quiz.media &&\n    //         <Media id={quiz.media.id}\n    //                type={quiz.media.type.value}\n    //                mixins={quiz.media.mixins.map(mixin=>mixin.value)}\n    //                path={quiz.media.path}\n    //                alt={quiz.title}\n    //         />\n    //         }\n    //         <div className=\"game4-quiz__caption d-none d-md-block\">\n    //             <h2 className=\"text-uppercase\">{quiz.title}<span className=\"subtitle\">{quiz.subtitle}</span></h2>\n    //             {displayResult()}\n    //             <Button variant=\"game4-quiz\"\n    //                     onClick={onClick}>\n    //                 {language_bundle && language_bundle.btnReset}\n    //             </Button>\n    //         </div>\n    //     </div>\n    // );\n}\n\n// Personalized.propTypes={}\n\nexport default Score;","import React from 'react'; //useEffect,useContext\nimport PropTypes from \"prop-types\";\n\nimport {Grid, Button, Typography} from '@material-ui/core';\nimport { useQuery } from '@apollo/react-hooks';\n\nimport get from \"lodash.get\";\n\nimport {StoreContext} from \"contexts\";\n\nimport 'react-circular-progressbar/dist/styles.css';\n\nimport {GET_QUIZ} from \"components/Quiz/QuizGraphQL.js\";\nimport Quiz from \"components/Quiz\"\nimport Indicator from \"components/Quiz/Indicator\"\nimport Qna from \"components/Qna\";\nimport Warmup from \"components/Warmup\";\nimport Score from \"components/Score\";\nimport {syncTracker} from \"misc/tracker\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport classnames from 'clsx';\n\nconst useStyles = makeStyles(theme => ({\n    main: {\n        position: \"relative\",\n    },\n    header:{\n        position: 'absolute',\n        top: 0, right: 0, left: 0,\n        zIndex: 2,\n        display: 'flex',\n        justifyContent: 'center',\n        padding: `${theme.spacing(2)}px ${theme.geometry.control.width} 0`,\n        flexWrap:'wrap',\n        '.showResult &':{\n            backgroundColor: theme.palette.grey['300'],\n        }\n    },\n    headerIndicators: {\n        flexBasis:'100%',\n        display: 'flex',\n        justifyContent: 'center',\n        zIndex:1,\n        listStyle: 'none',\n        marginTop:0,\n        marginBottom: `${theme.spacing(2)}px`,\n        '.showResult &':{\n            marginBottom:0,\n        }\n    },\n    headerResult:{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        height: 0,\n        width:'100%',\n        overflow:\"hidden\",\n        transition:theme.transitions.create(['height'],{\n            duration: theme.transitions.duration.standard,\n            easing: theme.transitions.easing.header,\n        }),\n        \".showResult &\":{\n            height: 'auto',\n            marginBottom: `${theme.spacing(3)}px`\n\n        }\n    },\n    headerText:{\n        textTransform: 'capitalize',\n        fontWeight: theme.typography.fontWeightBold,\n        color: theme.palette.grey[700],\n    },\n\n    inner:{\n        position: 'relative',\n        width: '100%',\n        overflow: 'hidden',\n        // @include clearfix()\n        \"&::after\": {\n            display: 'block',\n            clear: 'both',\n            content: \"\",\n        }\n    }\n}));\n\n\n\nconst initLanguageBundle = quizData => {\n    const keys = [\n        \"btnStart\",\n        \"btnSubmit\",\n        \"btnQuestion\",\n        \"btnNextQuestion\",\n        \"btnShowResults\",\n        \"btnReset\",\n        \"consentTitle\",\n        \"correctAnswer\",\n        \"wrongAnswer\"\n    ];\n    return keys.reduce((bundle,key)=>{\n        bundle[key] = get(quizData,`${key}.value`);\n        // console.debug(\"bundle: \",bundle);\n        return bundle;\n    },{});\n}\n\n//NOPE ! TODO jCustomer/context.json -> context. jContext.value = {context,jCustomer}\nconst App = (props)=> {\n    const classes = useStyles(props);\n\n    const { state, dispatch } = React.useContext(StoreContext);\n    const {\n        jContent,\n        quiz,\n        slideSet,\n        currentResult,\n        showResult,\n        showNext,\n        showScore\n    } = state;\n\n    const {loading, error, data} = useQuery(GET_QUIZ, {\n        variables:jContent.gql_variables,\n    });\n\n    React.useEffect(() => {\n        console.debug(\"App Quiz init !\");\n        if(loading === false && data){\n            console.debug(\"App Quiz init Set Data!\");\n\n            const quizData = get(data, \"response.quiz\", {});\n            const quizKey = get(quizData, \"key.value\");\n\n            jContent.language_bundle = initLanguageBundle(quizData);\n            console.debug(\"jContent.language_bundle: \",jContent.language_bundle);\n\n            dispatch({\n                case:\"DATA_READY\",\n                payload:{\n                    quizData\n                }\n            });\n\n            //init unomi tracker\n            if(jContent.gql_variables.workspace === \"LIVE\")\n                syncTracker({\n                    scope: jContent.scope,\n                    url: jContent.cdp_endpoint,\n                    sessionId:`qZ-${quizKey}-${Date.now()}`,\n                    dispatch\n                });\n        }\n    }, [loading,data]);\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error :(</p>;\n\n    const handleNextSlide = () =>\n        dispatch({\n            case:\"NEXT_SLIDE\"\n        });\n\n    const handleShowScore = () =>\n        dispatch({\n            case:\"SHOW_SCORE\"\n        });\n\n    const displayScore=()=>{\n        // console.log(\"[displayScore] showScore: \",showScore);\n        if(showScore)\n            return <Score/>\n    }\n    const getHeaderResultLabel=()=>{\n        if(currentResult)\n            return jContent.language_bundle.correctAnswer;\n        return jContent.language_bundle.wrongAnswer;\n    }\n\n    // {currentResult &&\n    // jContent.language_bundle.correctAnswer}\n    // {!currentResult &&\n    // jContent.language_bundle.wrongAnswer}\n\n    const getHeaderBtnNext=()=>{\n        if(showScore)\n            return  <Button onClick={handleShowScore}\n                           disabled={!showNext}>\n                        {jContent.language_bundle.btnShowResults}\n                    </Button>\n        return  <Button onClick={handleNextSlide}\n                       disabled={!showNext}>\n                    {jContent.language_bundle.btnNextQuestion}\n                </Button>\n    }\n    // {!showScore &&\n    //\n    // }\n    // {showScore &&\n    //\n    // }\n    // <Button variant=\"game4-quiz-header\"\n    return (\n        <Grid container spacing={3}>\n            <Grid item xs>\n                <div className={classnames(\n                    classes.main,\n                    (showResult?'showResult':'')\n                )}>\n                    <div className={classes.header}>\n                        <ol className={classes.headerIndicators}>\n                            {slideSet.map( itemId =>\n                                <Indicator\n                                    key={itemId}\n                                    id={itemId}\n                                    enabled={jContent.allow_indicator_browsing}\n                                />\n                            )}\n                        </ol>\n                        {jContent.language_bundle &&\n                        <div className={classes.headerResult}>\n                            <Typography className={classes.headerText}\n                                        variant=\"h4\">\n                                {getHeaderResultLabel()}\n                            </Typography>\n\n                            {getHeaderBtnNext()}\n                        </div>\n                        }\n                    </div>\n\n                    {quiz &&\n                    <div className={classes.inner}>\n                        <Quiz\n                            key={quiz.id}\n                        />\n                        {quiz.childNodes.map( (node,i) => {\n                            if(node.type === jContent.cnd_type.QNA)\n                                return <Qna\n                                    key={node.id}\n                                    id={node.id}\n                                />\n\n                            if(node.type === jContent.cnd_type.WARMUP)\n                                return <Warmup\n                                    key={node.id}\n                                    id={node.id}\n                                />\n                            return <Typography color=\"error\"\n                                               component=\"p\">\n                                node type {node.type} is not supported\n                            </Typography>\n\n                        })\n                        }\n                        {displayScore()}\n                    </div>\n                    }\n                </div>\n            </Grid>\n        </Grid>\n    );\n    {/*return (*/}\n    {/*    */}\n    {/*    <Container>*/}\n    {/*        <Row>*/}\n    {/*            <div className={`game4-quiz slide ${showResult?\"show-result\":\"\"}`}>*/}\n    {/*                {jContent.language_bundle &&*/}\n    {/*                    <div className=\"game4-quiz__header\">*/}\n\n    {/*                            <span className=\"game4-quiz__header-result\">*/}\n    {/*                                {currentResult &&*/}\n    {/*                                    jContent.language_bundle.correctAnswer}*/}\n    {/*                                {!currentResult &&*/}\n    {/*                                    jContent.language_bundle.wrongAnswer}*/}\n    {/*                            </span>*/}\n    {/*                            {!showScore &&*/}\n    {/*                                <Button variant=\"game4-quiz-header\"*/}\n    {/*                                    onClick={handleNextSlide}*/}\n    {/*                                    disabled={!showNext}>*/}\n    {/*                                    {jContent.language_bundle.btnNextQuestion}*/}\n    {/*                                </Button>*/}\n    {/*                            }*/}\n    {/*                            {showScore &&*/}\n    {/*                                <Button variant=\"game4-quiz-header\"*/}\n    {/*                                    onClick={handleShowScore}*/}\n    {/*                                    disabled={!showNext}>*/}\n    {/*                                    {jContent.language_bundle.btnShowResults}*/}\n    {/*                                </Button>*/}\n    {/*                            }*/}\n\n    {/*                    </div>*/}\n    {/*                }*/}\n    {/*                <ol className=\"game4-quiz__indicators\">*/}\n    {/*                    {slideSet.map( itemId =>*/}\n    {/*                        <Indicator*/}\n    {/*                            key={itemId}*/}\n    {/*                            id={itemId}*/}\n    {/*                            enabled={jContent.allow_indicator_browsing}*/}\n    {/*                        />*/}\n    {/*                    )}*/}\n    {/*                </ol>*/}\n    {/*                {quiz &&*/}\n    {/*                <div className=\"game4-quiz__inner\">*/}\n    {/*                    <Quiz*/}\n    {/*                        key={quiz.id}*/}\n    {/*                    />*/}\n    {/*                    {quiz.childNodes.map( (node,i) => {*/}\n    {/*                        if(node.type === jContent.cnd_type.QNA)*/}\n    {/*                            return <Qna*/}\n    {/*                                key={node.id}*/}\n    {/*                                id={node.id}*/}\n    {/*                            />*/}\n\n    {/*                        if(node.type === jContent.cnd_type.WARMUP)*/}\n    {/*                            return <Warmup*/}\n    {/*                                key={node.id}*/}\n    {/*                                id={node.id}*/}\n    {/*                            />*/}\n    {/*                        return <p className=\"text-danger\">node type {node.type} is not supported</p>*/}\n    {/*                    })*/}\n    {/*                    }*/}\n    {/*                    {displayScore()}*/}\n    {/*                </div>*/}\n    {/*                }*/}\n    {/*            </div>*/}\n    {/*        </Row>*/}\n    {/*    </Container>*/}\n    {/*);*/}\n};\n\nApp.propTypes={}\n\nexport default App;\n","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nconst Ajv = ({item,errors})=> {\n    return(\n        <div>\n            <h1>Validation errors</h1>\n            <p>An error occurred when validating <b>{item}</b></p>\n            <ul>\n                {errors.map( (error,i) =>\n                    <li>\n                        {error.dataPath} : {error.message}\n                    </li>)\n                }\n            </ul>\n        </div>\n    )\n}\n\nAjv.propTypes={\n    item:PropTypes.string.isRequired,\n    errors:PropTypes.array.isRequired\n};\n\nexport default Ajv;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const validMark=\"[*]\";\nconst score_splitPattern=\"::\";\n\nconst workspace = [\"default\",\"live\"];\nconst cnd_type = {\n    QNA:\"game4nt:qna\",\n    WARMUP:\"game4nt:warmup\",\n    WIDEN_IMAGE:\"wdennt:image\",\n    WIDEN_VIDEO:\"wdennt:video\",\n    EXT_VIDEO:'ext:video',\n    JNT_FILE:'jnt:file',\n    IMAGE:'jmix:image'\n}\nconst consent_status={\n    GRANTED:\"GRANTED\",\n    DENIED:\"DENIED\",\n    REVOKED:\"REVOKED\"\n};\n\nexport {\n    workspace,\n    cnd_type,\n    validMark,\n    consent_status,\n    score_splitPattern\n}","// import jCustomer from \"./definitions/jCustomer\";\n// import jContent from \"./definitions/jContent\";\n// import gql from \"./definitions/gql\";\nimport {workspace} from \"douane/lib/config\";\n\nexport default{\n    context:{\n        title:\"context validation schema \",\n        description:\"context is an object provided by the page in charge to load the app\",\n        // definitions: {\n        //     jContent:jContent,\n        //     jCustomer:jCustomer,\n        //     gql:gql\n        // },\n        type:\"object\",\n        // properties:{\n        //     jContent:{$ref:\"#jContent\"},\n        //     gql:{$ref:\"#gql\"},\n        //     jCustomer:{$ref:\"#jCustomer\"}\n        // },\n        properties:{\n            host:{\n                type:\"string\",\n                format:\"uri\",\n                default:process.env.REACT_APP_JCONTENT_HOST || \"http://localhost:8080\"\n            },\n            allow_indicator_browsing:{\n                type:\"boolean\",\n                default:false\n            },\n            workspace:{\n                type:\"string\",\n                enum:workspace,\n                default:process.env.REACT_APP_JCONTENT_WORKSPACE || workspace[1]//\"live\"\n            },\n            scope:{ type:\"string\",pattern:\"[a-zA-Z0-9-_]+\"},//iso\n            files_endpoint:{\n                type:\"string\",\n                format:\"uri\",\n                default:process.env.REACT_APP_JCONTENT_FILES_ENDPOINT || \"http://localhost:8080/files/live\"\n            },\n            gql_endpoint:{\n                type:\"string\",\n                format:\"uri\",\n                default:process.env.REACT_APP_JCONTENT_GQL_ENDPOINT || \"http://localhost:8080/modules/graphql\"\n            },\n            gql_authorization:{\n                type:\"string\",\n                // default:process.env.REACT_APP_JCONTENT_GQL_AUTH || \"Basic cm9vdDpyb290\"\n            },\n            gql_variables:{\n                type:\"object\",\n                properties:{\n                    id:{type:\"string\"},//\"3ff7b68c-1cfa-4d50-8377-03f19db3a985\"\n                    language:{type:\"string\",pattern:\"[a-z]{2}(?:_[A-Z]{2})?\"}//\"fr\" or \"fr_FR\"\n                },\n                required: [\"id\", \"language\"]\n            },\n            cdp_endpoint:{\n                type:\"string\",\n                format:\"uri\",\n                default:process.env.REACT_APP_JCUSTOMER_ENDPOINT //could be null in case of edit!\n            }//,\n            // language_bundle:{\n            //     type:\"object\",\n            //     properties:{\n            //         btnStart:{type:\"string\"},//\"Dmarrer\",\n            //         btnSubmit:{type:\"string\"},//\"Soumettre\",\n            //         btnQuestion:{type:\"string\"},//\"Question\",\n            //         btnNextQuestion:{type:\"string\"},//\"Question suivante\",\n            //         btnShowResults:{type:\"string\"},//\"Mon score\",\n            //         consentTitle:{type:\"string\"},//\"Consentement\",\n            //         correctAnswer:{type:\"string\"},//\"Correcte\",\n            //         wrongAnswer:{type:\"string\"}//\"Incorrecte\"\n            //     },\n            //     required: [\n            //         \"btnStart\",\n            //         \"btnSubmit\",\n            //         \"btnQuestion\",\n            //         \"btnNextQuestion\",\n            //         \"btnShowResults\",\n            //         \"consentTitle\",\n            //         \"correctAnswer\",\n            //         \"wrongAnswer\"\n            //     ],\n            //     additionalProperties:false\n            // }\n        },\n        required: [\n            \"host\",\n            \"allow_indicator_browsing\",\n            \"workspace\",\n            \"scope\",\n            \"files_endpoint\",\n            \"gql_endpoint\",\n            // \"gql_authorization\",\n            \"gql_variables\",\n            \"cdp_endpoint\",\n            // \"language_bundle\"\n        ],\n        additionalProperties:false\n    }\n}","import * as Ajv from \"ajv\";\nimport schema from  \"./lib/schema\"\nimport {getGQLWorkspace} from \"misc/utils\"\nimport {cnd_type,validMark,consent_status,score_splitPattern} from \"douane/lib/config\";\n\nconst ajv = new Ajv({useDefaults:true});\n//TODO le try catch doit etre fait ici et un component react doit etre retourne\nconst contextValidator = (context) =>{\n\n    const valid = ajv.validate(schema.context, context);\n    if (!valid)\n        // throw new Error(`An error occurred during the validation of context object, errors : ${JSON.stringify(ajv.errors)}`);\n        throw {item:\"Context configuration object\",errors:ajv.errors};\n\n    context.gql_variables.workspace = getGQLWorkspace(context.workspace);\n    context.cnd_type=cnd_type;\n    context.consent_status=consent_status;\n    context.quiz_validMark=validMark;\n    context.score_splitPattern=score_splitPattern;\n    return context;\n}\n\nexport {\n    contextValidator\n}","import React from \"react\";\nimport {StoreContext} from \"contexts\";\n\nimport {getRandomString} from \"misc/utils\";\nimport {syncQuizScore} from \"misc/tracker\";\nimport QuizMapper from \"components/Quiz/QuizModel\";\n\nconst init = jContent => {\n    return {\n        jContent,\n        quiz: null,//{consents:[],childNodes:[]},\n        resultSet:[],//array of boolean, order is the same a slideSet\n        currentResult:false,//previously result\n        slideSet:[],//previously slideIndex\n        currentSlide:null,//previously index\n        showResult:false,\n        showNext:false,\n        showScore:false,\n        max:-1,\n        score:0,\n        cxs:null,\n        reset:false,\n        scoreIndex:getRandomString(5,\"#aA\")\n    }\n}\n\nconst reducer = (state, action) => {\n    const { payload } = action;\n\n    const showNext = ({slideSet,max,slide}) =>\n        slideSet.indexOf(slide) < max;\n\n    switch (action.case) {\n        case \"DATA_READY\": {\n            //prepare slideIds\n            const {quizData} = payload;\n            console.debug(\"[STORE] DATA_READY - quizData: \",quizData);\n            const quiz = QuizMapper(quizData);\n\n            const slideSet = [quiz.id];\n            quiz.childNodes.forEach(node => slideSet.push(node.id));\n            slideSet.push(state.scoreIndex);\n\n            const max = slideSet.length -1;\n\n            return {\n                ...state,\n                quiz,\n                currentSlide:quiz.id,\n                slideSet,\n                showNext:showNext({slideSet,max,slide:quiz.id}),\n                max\n            };\n        }\n        case \"ADD_CXS\": {\n            const cxs = payload.cxs;\n            console.debug(\"[STORE] ADD_CXS - cxs: \",cxs);\n            return {\n                ...state,\n                cxs\n            };\n        }\n        case \"ADD_SLIDES\": {\n            const slides = payload.slides;\n            const parentSlide = payload.parentSlide;\n            let slideSet = state.slideSet;\n\n            if (parentSlide && slideSet.includes(parentSlide)) {\n                const position = slideSet.indexOf(parentSlide) + 1;\n                slideSet.splice(position, 0, ...slides);\n            } else {\n                slideSet = [...slideSet, ...slides];\n            }\n\n            const max = slideSet.length -1;\n\n            console.debug(\"[STORE] ADD_SLIDE - slides: \",slides,\" parentSlide: \",parentSlide);\n            return {\n                ...state,\n                slideSet,\n                showNext:showNext({slideSet,max,slide:state.currentSlide}),\n                max\n            };\n        }\n        case \"NEXT_SLIDE\":{\n            const currentIndex = state.slideSet.indexOf(state.currentSlide);\n            const nextIndex = currentIndex+1;\n            console.debug(\"[STORE] NEXT_SLIDE - currentIndex: \",currentIndex,\", max : \",state.max);\n\n            let nextSlide = state.currentSlide;\n\n            if(currentIndex  < state.max )\n                nextSlide = state.slideSet[nextIndex];\n\n            const showScore = currentIndex === state.max-1;\n\n            return {\n                ...state,\n                currentSlide:nextSlide,\n                showNext: showNext({...state,slide:nextSlide}),\n                showResult:false,\n                showScore,\n                reset:false\n            };\n        }\n        case \"SHOW_SLIDE\": {\n            const slide = payload.slide\n            console.debug(\"[STORE] SHOW_SLIDE - slide: \",slide);\n            return {\n                ...state,\n                currentSlide: slide,\n                showNext: showNext({...state, slide})\n            };\n        }\n        case \"SHOW_RESULT\": {\n            const currentResult = payload.result;\n            const currentIndex = state.slideSet.indexOf(state.currentSlide);\n            const showScore = currentIndex === state.max-1;\n            console.debug(\"[STORE] SHOW_RESULT - currentResult: \", currentResult);\n\n            return {\n                ...state,\n                showScore,\n                resultSet: [...state.resultSet, currentResult],\n                currentResult,\n                showResult: true\n            };\n        }\n        case \"SHOW_SCORE\": {\n            console.debug(\"[STORE] SHOW_SCORE\");\n            const [slide] = state.slideSet.slice(-1);\n\n            const goodAnswers = state.resultSet.filter(result => result).length;\n            const answers = state.resultSet.length;\n            const score = Math.floor((goodAnswers/answers)*100);\n\n            syncQuizScore({\n                quizKey:state.quiz.key,\n                split:state.jContent.score_splitPattern,\n                quizScore:score\n            });\n\n            return {\n                ...state,\n                currentSlide: slide,\n                showNext: showNext({...state, slide}),\n                showResult:false,\n                score\n            };\n        }\n        case \"RESET\": {\n            console.debug(\"[STORE] RESET\");\n\n            const [currentSlide] = state.slideSet.slice(0,1);\n            console.debug(\"[STORE] RESET slideSet\",state.slideSet);\n\n            return {\n                ...state,\n                currentSlide,\n                resultSet:[],\n                showScore:false,\n                currentResult:false,\n                reset:true\n            }\n        }\n        default:\n            throw new Error(`[STORE] action case '${action.case}' is unknown `);\n    };\n}\n\nexport const Store = props => {\n    const [state, dispatch] = React.useReducer(\n        reducer,\n        props.jContent,\n        init\n    );\n    return (\n        <StoreContext.Provider value={{ state, dispatch }}>\n            {props.children}\n        </StoreContext.Provider>\n    );\n};","import get from \"lodash.get\";\n\nexport default function(quizData) {\n    return{\n        //NOTE be sure string value like \"false\" or \"true\" are boolean I use JSON.parse to cast\n        id: get(quizData, \"id\"),\n        type: get(quizData, \"type.value\"),\n        key : get(quizData, \"key.value\", {}),\n        title: get(quizData, \"title\", \"\"),\n        subtitle: get(quizData, \"subtitle.value\", \"\"),\n        description: get(quizData, \"description.value\", \"\"),\n        duration: get(quizData, \"duration.value\", \"\"),\n        //cover: get(quizData, \"cover.node.path\", \"\"),\n        media: get(quizData, \"media.node\", {}),\n        consents: get(quizData, \"consents.nodes\", []).map(node =>{\n            return {\n                id:get(node,\"id\"),\n                actived:JSON.parse(get(node,\"actived.value\"))\n            }\n        }),\n        personalizedResult :{\n            id:get(quizData, \"personalizedResult.node.id\", null),\n            type:get(quizData, \"personalizedResult.node.type.value\", null)\n        },\n        childNodes : get(quizData,\"children.nodes\",[]).map(node =>{\n            return {\n                id: get(node, \"id\"),\n                type: get(node, \"type.value\")\n            };\n        }),\n    }\n};","import { createMuiTheme } from '@material-ui/core/styles';\nimport React from \"react\";\n\nconst theme = createMuiTheme({\n    geometry:{\n        item:{\n            minHeight:\"70vh\",\n        },\n        control:{\n            width:\"5%\"\n        },\n        caption:{\n            width:\"90%\",\n        },\n        indicator:{\n            width:\"30px\",\n            height:\"3px\",\n            hitAreaHeight:\"10px\",\n            spacer:\"3px\",\n        },\n        checkedAnswer:{\n            borderRadius:\"10px\"\n        }\n    },\n    palette: {\n        primary:{\n            light: \"#009bdc\",\n            main: \"#007cb0\",\n            dark: \"#005f87\"\n        },\n        secondary:{\n            light: \"#f57c30\",\n            main: \"#e57834\",\n            dark: \"#bd5715\"\n        },\n        text:{\n            primary:\"rgba(255, 255, 255, 0.87)\",\n            secondary:\"rgba(0, 0, 0, 0.87)\"\n        },\n        background:{\n            overlay: \"rgba(0,0,0,.75)\",\n            checkedAnswer: \"rgba(255,255,255,1)\",\n        },\n        shadows:{\n            overlay:\"inset 1140px 0 570px -570px rgba(0,0,0,.5)\",\n        }\n    },\n    typography:{\n        allVariants:{\n            color:\"rgba(255, 255, 255, 0.87)\"\n        },\n        fontFamily:[\"Lato\",\"Helvetica\",\"Arial\",\"sans-serif\"].join(\",\"),\n        h3:{\n            fontWeight: 300\n        },\n        h4:{\n            fontWeight: 300\n        }\n    },\n    // shape:{\n    //     borderRadius:3\n    // }\n    transitions:{\n        easing:{\n            ease:\"cubic-bezier(0.25, 0.1, 0.25, 1)\",\n            header:\"cubic-bezier(.23,1,.32,1)\"\n        },\n        duration:{\n            long:600\n        }\n    },\n    spacing: 8,\n    overrides: {\n        MuiCheckbox:{\n            root:{\n                color:\"rgba(255, 255, 255, 0.87)\"\n            }\n        },\n        MuiRadio:{\n            root:{\n                color:\"rgba(255, 255, 255, 0.87)\"\n            }\n        },\n        MuiButton:{\n            contained:{\n                \"&$disabled\": {\n                    color: \"rgba(255, 255, 255, 0.26)\",\n                    backgroundColor: \"rgba(255, 255, 255, 0.12)\"\n                }\n            }\n\n        },\n        // MuiCssBaseline: {\n        //     '@global': {\n        //         // '@font-face': ['Lato'],\n        //         '.Mui-disabled': {\n        //             color: \"rgba(255, 255, 255, 0.26)\",\n        //             backgroundColor: \"rgba(255, 255, 255, 0.12)\"\n        //         }\n        //\n        //     },\n        // },\n    },\n    props:{\n        MuiButton:{\n            disableRipple:true,\n            color:\"primary\",\n            variant:\"contained\",\n        },\n\n        MuiCheckbox:{\n            disableRipple:true,\n            color:\"primary\",\n        },\n        MuiRadio:{\n            disableRipple:true,\n            color:\"primary\",\n        }\n    }\n});\n\nexport default theme;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from 'components/App';\nimport AjvError from \"components/Error/Ajv\";\n\nimport * as serviceWorker from 'misc/serviceWorker';\n\nimport ApolloClient from \"apollo-boost\";\nimport { ApolloProvider } from '@apollo/react-hooks';\n\nimport {contextValidator} from \"douane\";\n\nimport {Store} from \"components/Store\";\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from 'components/theme';\n\nimport 'index.css';\n\nconst render=(target,context)=>{\n  try{\n    // console.log(\"context : \",JSON.stringify(context));\n    context = contextValidator(context);\n    const headers={};\n    if(context.gql_authorization)\n      headers.Authorization=context.gql_authorization;\n\n    const client = new ApolloClient({\n      uri:context.gql_endpoint,\n      headers\n    })\n\n    // console.log(\"lesson : \",src.data.jcr.lesson);\n    ReactDOM.render(\n      <Store jContent={context}>\n        <ApolloProvider client={client}>\n          <ThemeProvider theme={theme}>\n            <App />\n          </ThemeProvider>\n        </ApolloProvider>\n      </Store>,\n      document.getElementById(target)\n    );\n\n  }catch(e){\n    console.error(\"error : \",e);\n    //TODO create a generic error handler\n    ReactDOM.render(\n      <AjvError\n        item={e.item}\n        errors={e.errors}\n      />,\n      document.getElementById(target)\n    );\n  }\n}\n\nwindow.quizUIApp = render;\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}